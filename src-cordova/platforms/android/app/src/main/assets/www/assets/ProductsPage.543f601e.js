import{l as i,a_ as V,au as I,aA as d,Y as p,Z as r,a4 as a,b3 as e,c5 as m,bR as S,J as v,aG as b,cF as x,cI as q,X as j,a3 as _,F as c}from"./index.f2854204.js";import{Q as o}from"./QSkeleton.7ac9bff4.js";import{a as k,Q as g}from"./QItemSection.7aeaf6f8.js";import{Q as f}from"./QItemLabel.590af1b2.js";import{Q as B}from"./QList.44c51499.js";import{Q as C}from"./QPagination.33bbd4ba.js";import{i as N}from"./index.360ce4ab.js";import{u as F}from"./userAuth.958f8d0b.js";import"./format.a33550d6.js";import"./axios.f1f32898.js";import"./useToast.2a507564.js";const L=r("p",{class:"q-ml-lg q-mt-lg title-large"},"Ofertas",-1),U={class:"full-width full-height row justify-center q-mt-lg"},A={class:"full-width full-height row wrap q-gutter-lg justify-center q-my-lg"},D=["src"],E={class:"line-clamp-4"},G={class:"full-width full-height row wrap q-gutter-lg justify-center q-my-lg"},W={__name:"ProductsPage",setup(J){const{user:P}=F();console.log(P);const u=i(1),w=i(0),Q=i([]),s=i(""),y=i(!1);V(u,async l=>{await h()}),V(s,async l=>{await h()});async function h(){try{y.value=!0;const{data:l}=await N.get("/comercio-ofertas?with[]=comercio&nombre="+s.value+"&page="+u.value);Q.value=l.data,w.value=l.pagination.lastPage,u.value=l.pagination.currentPage}catch{}finally{y.value=!1}}return I(async()=>{await h()}),(l,n)=>(d(),p(v,null,[L,r("div",U,[a(S,{modelValue:s.value,"onUpdate:modelValue":n[1]||(n[1]=t=>s.value=t),outlined:"",type:"search",label:"Buscar ofertas",color:"primary"},{append:e(()=>[a(m,{name:"search",modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=t=>s.value=t)},null,8,["modelValue"])]),_:1},8,["modelValue"])]),r("div",A,[y.value?(d(),p(v,{key:0},b(20,t=>r("div",{key:t,class:"skeleton-card"},[a(q,{class:"my-card",style:{height:"460px",width:"250px"}},{default:e(()=>[a(o,{height:"200px",width:"250px",square:""}),a(x,null,{default:e(()=>[a(o,{style:{"margin-bottom":"10px"},type:"QSlider"}),a(o,{style:{"margin-bottom":"10px"},type:"QSlider"}),a(o,{type:"text",class:"text-caption"}),a(o,{type:"text",class:"text-caption"}),a(o,{type:"text",class:"text-caption"}),a(o,{type:"text",class:"text-caption"})]),_:1})]),_:1})])),64)):j("",!0),(d(!0),p(v,null,b(Q.value,t=>(d(),p("div",{key:t.id},[a(q,{class:"my-card",style:{height:"460px",width:"250px"}},{default:e(()=>[r("img",{style:{height:"200px",width:"250px","max-height":"200px"},src:t.img_array_url[0]?t.img_array_url[0]:"https://cdn.quasar.dev/img/mountains.jpg"},null,8,D),a(x,null,{default:e(()=>[a(B,null,{default:e(()=>[a(k,{clickable:""},{default:e(()=>[a(g,{avatar:""},{default:e(()=>[a(m,{color:"primary",name:"add_shopping_cart"})]),_:1}),a(g,null,{default:e(()=>[a(f,null,{default:e(()=>[_(c(t.nombre),1)]),_:2},1024),a(f,{caption:""},{default:e(()=>[a(m,{color:"primary",name:"add_shopping_cart"}),_(" "+c(t.comercio.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),a(k,{clickable:""},{default:e(()=>[a(g,{avatar:""},{default:e(()=>[a(m,{color:"red",name:"sell"})]),_:1}),a(g,null,{default:e(()=>[a(f,null,{default:e(()=>[_(c(t.price_total)+" $",1)]),_:2},1024),a(f,{caption:""},{default:e(()=>[_("Descuento"+c(t.descuento)+" %",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),a(x,{class:"q-pt-none"},{default:e(()=>[r("p",E,c(t.description),1)]),_:2},1024)]),_:2},1024)]))),128))]),r("div",G,[a(C,{style:{"margin-top":"1em"},modelValue:u.value,"onUpdate:modelValue":n[2]||(n[2]=t=>u.value=t),max:w.value,"boundary-numbers":""},null,8,["modelValue","max"])])],64))}};export{W as default};
