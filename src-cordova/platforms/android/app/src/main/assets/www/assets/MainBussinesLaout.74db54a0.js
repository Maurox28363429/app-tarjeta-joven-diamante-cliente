import{l as _,au as H,aI as C,aA as v,Y as q,a4 as e,bs as p,X as $,Z as t,ce as N,W as Q,b3 as a,cG as V,b5 as f,bp as D,cH as O,c5 as M,a3 as R,F as A,y as k,B as j,cI as F,cJ as U,cA as W,cn as L}from"./index.63fc166d.js";import{Q as G}from"./QImg.b039bc03.js";import{Q as J,a as X,_ as Y,b as Z,c as K,d as ee}from"./acronimo.1e6eedac.js";import{a as I,Q as h}from"./QItemSection.edc703a2.js";import{Q as ae}from"./QList.569e9378.js";import{Q as oe}from"./QScrollArea.529e40ea.js";import{Q as se,a as te,b as le,c as P,d as re,_ as z,e as ne,f as B}from"./date.b9df5805.js";import{C as ie}from"./ClosePopup.bc824846.js";import{Q as ce}from"./QInnerLoading.8ea61246.js";import{u as de}from"./useToast.1d3ed0da.js";import{u as ue}from"./userAuth.320553cc.js";import"./QScrollObserver.3d26f0ec.js";import"./selection.cee9801d.js";import"./format.a33550d6.js";import"./rtl.b51694b1.js";import"./index.360ce4ab.js";import"./axios.f1f32898.js";const pe={key:0,class:"full-width full-height column justify-center items-center"},me=t("p",{class:"title-medium"},"Activa los permisos para la camara",-1),fe={__name:"QRScanner",setup(S){const o=_(!1),n=_(!0),{triggerWarning:i}=de();function m(){window.cordova&&window.cordova.plugins&&window.cordova.plugins.permissions&&window.cordova.plugins.permissions.requestPermission(window.cordova.plugins.permissions.CAMERA,function(r){r.hasPermission?(console.log("Permiso de c\xE1mara concedido"),n.value=!0):(console.warn("Permiso de c\xE1mara denegado"),i("Los permisos para la camara estan desactivados"),n.value=!1)},function(){console.error("Error al solicitar el permiso de c\xE1mara"),i("Los permisos para la camara estan desactivados"),n.value=!1})}H(()=>{m()});const d=r=>{console.log("C\xF3digo QR escaneado:",r)},b=r=>{o.value=!0,r.then(()=>{console.log("\xA1Listo para escanear!"),n.value=!0}).catch(g=>{console.error("Error al inicializar el lector de QR:",g),i("Los permisos para la camara estan desactivados"),n.value=!1}).finally(()=>{o.value=!1})},w=()=>{console.log("C\xF3digo QR detectado.")},l=r=>{console.error("Error al escanear el c\xF3digo QR:",r)};return(r,g)=>{const x=C("qrcode-stream");return v(),q("div",null,[e(x,{onDecode:d,onInit:b,onDetect:w,onError:l}),e(ce,{showing:o.value,label:"Por favor espera...","label-class":"text-teal","label-style":"font-size: 1.1em"},null,8,["showing"]),n.value?$("",!0):(v(),q("div",pe,[me,e(p,{class:"cordova-only",color:"primary",label:"Pedir permisos",onClick:m})]))])}}};const _e=t("img",{src:"https://cdn.quasar.dev/img/boy-avatar.png"},null,-1),ve={class:"q-mini-drawer-hide absolute",style:{top:"15px",right:"-17px","z-index":"20"}},ge={class:"absolute-top",style:{height:"150px"}},he={class:"column items-center absolute-bottom bg-transparent"},be=t("img",{src:"https://cdn.quasar.dev/img/boy-avatar.png"},null,-1),we={class:"text-weight-bold"},xe={style:{"text-overflow":"ellipsis",overflow:"hidden",width:"196px"}},ye={class:"q-px-sm q-py-lg"},Qe={class:"qrButton"},ke=t("img",{src:ne,style:{width:"24px",height:"24px"}},null,-1),Ne={__name:"MainBussinesLaout",setup(S){const{user:o}=ue(),n=()=>{console.log("goHome"),m.push("/empresa")},i=_(!1),m=N(),d=_(!1),b=()=>{var s;return((s=o==null?void 0:o.membresia)==null?void 0:s.days)===1},w=()=>{var s;return B((s=o==null?void 0:o.membresia)==null?void 0:s.updated_at)===B(new Date)},l=_(!0),r=()=>{d.value=!d.value},g=s=>{s.preventDefault(),localStorage.removeItem("user"),m.push("/login")},x=()=>{i.value=!0,l.value=!l.value},E=s=>{l.value&&(l.value=!1,s.stopPropagation())};return(s,c)=>{const y=C("router-link"),T=C("router-view");return v(),Q(ee,{view:"hHh lpR fFf"},{default:a(()=>[e(Z,{class:"q-py-sm text-white",style:{height:"60px",background:"#f8fdff","box-shadow":`0px 1px 2px rgba(0, 0, 0, 0.3),\r
          0px 1px 3px 1px rgba(0, 0, 0, 0.15)`}},{default:a(()=>[e(J,{class:"row items-center"},{default:a(()=>[e(p,{class:"menu",dense:"",flat:"",round:"",icon:"menu",color:"dark",onClick:x}),e(X,{class:"row items-center"},{default:a(()=>[e(G,{src:Y,"spinner-color":"dark",onClick:n,style:{height:"32px","max-width":"74px",cursor:"pointer"}})]),_:1}),e(p,{style:{height:"35px",width:"35px",display:"none"},fill:"",round:"",icon:"shopping_cart",color:"secondary"}),e(y,{to:"/empresa/account",class:"cursor-pointer"},{default:a(()=>[e(V,{size:"42px",class:"q-ml-md"},{default:a(()=>[_e]),_:1})]),_:1})]),_:1})]),_:1}),e(se,{modelValue:i.value,"onUpdate:modelValue":c[1]||(c[1]=u=>i.value=u),"show-if-above":"",mini:!i.value||l.value,onClickCapture:E,width:214,breakpoint:700,bordered:"",class:j(s.$q.dark.isActive?"bg-grey-9":"bg-grey-3")},{default:a(()=>[t("div",ve,[e(p,{dense:"",round:"",unelevated:"",color:"accent",icon:"chevron_left",onClick:c[0]||(c[0]=u=>l.value=!0)})]),e(oe,{style:{height:"calc(100% - 150px)","margin-top":"150px","border-right":"1px solid #ddd"}},{default:a(()=>[e(ae,{padding:""},{default:a(()=>[f(e(O,{inset:""},null,512),[[D,!l.value]]),f((v(),Q(I,{clickable:"",to:"/empresa/account"},{default:a(()=>[e(h,{avatar:""},{default:a(()=>[e(M,{name:"person"})]),_:1}),e(h,null,{default:a(()=>[R("Mi perfil")]),_:1})]),_:1})),[[L]]),f((v(),Q(I,{clickable:"",to:"/empresa/orders"},{default:a(()=>[e(h,{avatar:""},{default:a(()=>[e(M,{name:"receipt_long"})]),_:1}),e(h,null,{default:a(()=>[R("Ordenes")]),_:1})]),_:1})),[[L]])]),_:1}),t("div",{onClick:g,class:"row justify-center full-width full-height body-small"},[e(p,{icon:"power_settings_new",label:l.value?"":"Cerrar sesi\xF3n","text-color":"white",class:"body-small",style:{position:"absolute",bottom:"20px","background-color":"#ba1a1a"}},null,8,["label"])])]),_:1}),f(t("div",ge,[t("div",he,[e(V,{size:"56px",class:"q-mb-sm"},{default:a(()=>[be]),_:1}),t("div",we," \xA1Hola, "+A(k(o).name+" "+k(o).last_name)+"! ",1),t("div",null,[t("p",xe,A(k(o).email),1)])])],512),[[D,!l.value]])]),_:1},8,["modelValue","mini","class"]),e(K,{style:{background:"#f8fdff"}},{default:a(()=>[e(T)]),_:1}),e(W,{modelValue:d.value,"onUpdate:modelValue":c[2]||(c[2]=u=>d.value=u),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(F,null,{default:a(()=>[e(fe),e(U,{align:"right",class:"text-primary"},{default:a(()=>[f(e(p,{flat:"",label:"Close"},null,512),[[ie]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t("div",ye,[t("div",Qe,[e(le,{color:"primary",icon:"keyboard_arrow_up",direction:"up"},{default:a(()=>[e(te,{color:"primary",onClick:r},{default:a(()=>[ke]),_:1})]),_:1})])]),e(re,{modelValue:s.tab,"onUpdate:modelValue":c[3]||(c[3]=u=>s.tab=u),style:{position:"fixed","z-index":"100",bottom:"0",width:"100%","border-radius":"16px 16px 0 0"},dense:"",class:"menuMobile bg-primary text-white justify-center",align:"justify-center","narrow-indicator":""},{default:a(()=>[e(y,{to:"/empresa/account",style:{"text-decoration":"none",color:"#ffff",width:"100%",margin:"none"}},{default:a(()=>[e(P,{name:"cuenta",label:"Cuenta",color:"white",class:"text-capitalize q-px-none",icon:"person"})]),_:1}),e(y,{to:"/empresa/orders",style:{"text-decoration":"none",color:"#ffff",width:"100%",margin:"none"}},{default:a(()=>[e(P,{name:"Ordenes",label:"Ordenes",color:"white",class:"text-capitalize q-px-none",icon:"receipt_long"})]),_:1})]),_:1},8,["modelValue"]),e(z,{showModal:w(),description:"Obten 5 d\xEDas de pueba con el plan free, y recibe ofertas especiales"},null,8,["showModal"]),e(z,{showModal:b(),description:"Renueva el plan, y recibe ofertas especiales"},null,8,["showModal"])]),_:1})}}};export{Ne as default};
