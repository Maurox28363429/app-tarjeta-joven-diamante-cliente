import{cE as z,l as S,cb as w,a_ as $,aA as v,Y as b,Z as u,a4 as e,b3 as l,cG as C,a3 as s,F as i,y as t,br as T,bR as g,X as h,bs as D,aD as G,aB as M}from"./index.a4f72fbe.js";import{a as p,Q as m}from"./QItemSection.fa7ab13d.js";import{Q as r}from"./QItemLabel.f97b687a.js";import{Q}from"./QList.0845b604.js";import{Q as j}from"./QSelect.3025efa3.js";import{u as F}from"./userAuth.59b6eac0.js";import{u as K}from"./useValidateForm.3637fae8.js";import{u as L,a as O}from"./updateUser.7845e113.js";import{u as R}from"./useToast.94c021fd.js";import"./position-engine.11e8aac5.js";import"./selection.1b1883d3.js";import"./rtl.b51694b1.js";import"./format.a33550d6.js";import"./index.360ce4ab.js";import"./axios.f1f32898.js";import"./use-quasar.f2aa822b.js";const P=y=>(G("data-v-511af2b0"),y=y(),M(),y),H={class:"full-width row justify-center"},W=P(()=>u("div",{class:"full-width title-large q-pt-lg q-pl-lg"},[u("p",null,"Perfil")],-1)),X={class:"q-pa-md full-width row wrap justify-center q-gutter-lg"},Y=P(()=>u("img",{src:"https://cdn.quasar.dev/img/boy-avatar.png"},null,-1)),Z=["onSubmit"],J={class:"full-width input"},ee={class:"label-large"},le={key:0,class:"error"},ae={class:"full-width input"},te={class:"label-large"},se={key:0,class:"error"},oe={class:"full-width input"},re={class:"label-large"},ue={key:0,class:"error"},ne={class:"full-width input"},de={class:"label-large"},ie={key:0,class:"error"},me={class:"full-width input"},pe={class:"label-large"},_e={class:"q-ma-none full-width input"},fe={class:"label-large"},ce={key:0,class:"error"},ve={__name:"ProfilePage",setup(y){const{triggerPositive:A,triggerWarning:k}=R(),V=S(!1),{user:x,updatedUser:B}=F(),n=S(w.getUser().user);$(x,()=>{n.value=x});const U=[{label:"Mujer",value:0},{label:"Hombre",value:1}],I=U.find(c=>c.value===n.value.sex),E={name:n.value.name,email:n.value.email,last_name:n.value.last_name,phone:n.value.phone,sex:I,address:n.value.address},{useForm:d,validatInput:f,validateMessage:_,validateForm:N}=K({initialValue:E,schema:L}),q=async()=>{N();try{V.value=!0;const c={...d.value,role_id:n.value.role_id,active:n.value.active,id:n.value.id,sex:d.value.sex.value};await O(c);const a=w.getUser();w.setUser({user:{...a.user,...c},token:a.token}),B(),A("Usuario actualizado con \xE9xito")}catch(c){console.log(c),k("Ah ocurrido un error, intente nuevamente")}finally{V.value=!1}};return(c,a)=>(v(),b("div",H,[W,u("div",X,[e(Q,{bordered:"",padding:"",separator:"",class:"profile rounded-borders"},{default:l(()=>[e(p,null,{default:l(()=>[e(m,{class:"row justify-center full-width items-center"},{default:l(()=>[e(C,{size:"80px",class:"q-mr-md"},{default:l(()=>[Y]),_:1})]),_:1})]),_:1}),e(p,null,{default:l(()=>[e(m,null,{default:l(()=>[e(r,null,{default:l(()=>[s("Nombre")]),_:1}),e(r,{caption:""},{default:l(()=>[s(i(n.value.name),1)]),_:1})]),_:1})]),_:1}),e(p,null,{default:l(()=>[e(m,null,{default:l(()=>[e(r,null,{default:l(()=>[s("Apellido")]),_:1}),e(r,{caption:""},{default:l(()=>[s(i(n.value.last_name),1)]),_:1})]),_:1})]),_:1}),e(p,null,{default:l(()=>[e(m,null,{default:l(()=>[e(r,null,{default:l(()=>[s("Email")]),_:1}),e(r,{caption:""},{default:l(()=>[s(i(n.value.email),1)]),_:1})]),_:1})]),_:1}),e(p,null,{default:l(()=>[e(m,null,{default:l(()=>[e(r,null,{default:l(()=>[s("Telefono")]),_:1}),e(r,{caption:""},{default:l(()=>[s(i(n.value.phone),1)]),_:1})]),_:1})]),_:1}),e(p,null,{default:l(()=>[e(m,null,{default:l(()=>[e(r,null,{default:l(()=>[s("Genero")]),_:1}),e(r,{caption:""},{default:l(()=>[s(i(t(I).label),1)]),_:1})]),_:1})]),_:1}),e(p,null,{default:l(()=>[e(m,null,{default:l(()=>[e(r,null,{default:l(()=>[s("Direccion")]),_:1}),e(r,{caption:""},{default:l(()=>[s(i(n.value.address),1)]),_:1})]),_:1})]),_:1}),e(p,null,{default:l(()=>[e(m,null,{default:l(()=>[e(r,null,{default:l(()=>[s("Membres\xEDa")]),_:1}),e(r,{caption:""})]),_:1})]),_:1}),e(p,null,{default:l(()=>[e(m,null,{default:l(()=>[e(r,null,{default:l(()=>[s("Estado de Membres\xEDa")]),_:1}),e(r,{caption:""},{default:l(()=>[s(i(n.value.membresia.status),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(Q,{bordered:"",padding:"",separator:"",class:"editContainer rounded-borders"},{default:l(()=>[u("form",{onSubmit:T(q,["prevent"])},[e(p,null,{default:l(()=>[e(m,null,{default:l(()=>[e(r,{class:"title-medium"},{default:l(()=>[s("Editar")]),_:1})]),_:1})]),_:1}),e(p,null,{default:l(()=>[e(m,{class:"formContainer"},{default:l(()=>[u("div",J,[u("label",ee,[s(" Name "),e(g,{"lazy-rules":"",type:"text",outlined:"",placeholder:"Pepito",modelValue:t(d).name,"onUpdate:modelValue":a[0]||(a[0]=o=>t(d).name=o),onBlur:a[1]||(a[1]=o=>t(f)("name")),onKeypress:a[2]||(a[2]=o=>t(f)("name"))},null,8,["modelValue"])]),t(_).errors.name?(v(),b("p",le,i(t(_).errors.name),1)):h("",!0)]),u("div",ae,[u("label",te,[s(" Apellido "),e(g,{"lazy-rules":"",type:"text",modelValue:t(d).last_name,"onUpdate:modelValue":a[3]||(a[3]=o=>t(d).last_name=o),outlined:"",placeholder:"Apellido",onBlur:a[4]||(a[4]=o=>t(f)("last_name")),onKeypress:a[5]||(a[5]=o=>t(f)("last_name"))},null,8,["modelValue"])]),t(_).errors.last_name?(v(),b("p",se,i(t(_).errors.last_name),1)):h("",!0)]),u("div",oe,[u("label",re,[s(" Email "),e(g,{"lazy-rules":"",type:"email",modelValue:t(d).email,"onUpdate:modelValue":a[6]||(a[6]=o=>t(d).email=o),outlined:"",placeholder:"example@gmail.com",onBlur:a[7]||(a[7]=o=>t(f)("email")),onKeypress:a[8]||(a[8]=o=>t(f)("email"))},null,8,["modelValue"])]),t(_).errors.email?(v(),b("p",ue,i(t(_).errors.email),1)):h("",!0)]),u("div",ne,[u("label",de,[s(" Telefono "),e(g,{"lazy-rules":"",type:"tel",modelValue:t(d).phone,"onUpdate:modelValue":a[9]||(a[9]=o=>t(d).phone=o),outlined:"",placeholder:"0414767997",onBlur:a[10]||(a[10]=o=>t(f)("phone")),onKeypress:a[11]||(a[11]=o=>t(f)("phone"))},null,8,["modelValue"])]),t(_).errors.phone?(v(),b("p",ie,i(t(_).errors.phone),1)):h("",!0)]),u("div",me,[u("label",pe,[s(" Direccion "),e(g,{modelValue:t(d).address,"onUpdate:modelValue":a[12]||(a[12]=o=>t(d).address=o),"lazy-rules":"",type:"text",outlined:"",placeholder:""},null,8,["modelValue"])])]),u("div",_e,[u("label",fe,[s(" Genero "),e(j,{outlined:"","lazy-rules":"",modelValue:t(d).sex,"onUpdate:modelValue":a[13]||(a[13]=o=>t(d).sex=o),class:"full-width q-ma-none",options:U},null,8,["modelValue"])]),t(_).errors.sex?(v(),b("p",ce,i(t(_).errors.sex),1)):h("",!0)]),e(m,{class:"button"},{default:l(()=>[e(D,{loading:V.value,type:"submit",color:"primary",label:"Guardar"},null,8,["loading"])]),_:1})]),_:1})]),_:1})],40,Z)]),_:1})])]))}};var Ne=z(ve,[["__scopeId","data-v-511af2b0"]]);export{Ne as default};
