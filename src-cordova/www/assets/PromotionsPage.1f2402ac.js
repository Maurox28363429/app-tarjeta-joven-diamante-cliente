import{l as o,a_ as V,au as N,aA as c,Y as u,Z as s,a4 as e,b3 as a,c5 as I,bR as S,J as h,aG as C,cF as d,cJ as w,cI as x,W as A,F as v,bs as b,a3 as D,cH as F,b5 as M,cA as U}from"./index.f2854204.js";import{Q as n}from"./QSkeleton.7ac9bff4.js";import{Q as P}from"./QImg.6e5581d1.js";import{Q as $}from"./QPagination.33bbd4ba.js";import{C as J}from"./ClosePopup.8a271a9b.js";import{i as E}from"./index.360ce4ab.js";import"./format.a33550d6.js";import"./axios.f1f32898.js";async function G({page:k=1,search:i=""}={}){return await E.get(`/noticias?search=${i}&page=${k}`)}const H={class:"promotions"},L=s("p",{class:"title-large"},"Promociones",-1),R={class:"search-box"},T={class:"news-grid"},W={key:0,class:"no-results"},Y={class:"news-title line-clamp-2"},Z={class:"news-description line-clamp-3"},j={class:"q-pa-lg flex flex-center"},z={class:"news-title"},K={class:"news-description"},re={__name:"PromotionsPage",setup(k){const i=o(!1),f=o([]),p=o(""),_=o({}),g=o(!1),m=o(1),B=o(1),q=l=>{_.value={...l},i.value=!0};async function y(){try{g.value=!0;const{data:l}=await G({page:m.value,search:p.value});f.value=l.data}catch(l){console.log(l)}finally{g.value=!1}}return V(m,async l=>{await y()}),V(p,async l=>{await y()}),N(async()=>{await y()}),(l,r)=>{var Q;return c(),u("div",H,[L,s("div",R,[e(S,{modelValue:p.value,"onUpdate:modelValue":r[0]||(r[0]=t=>p.value=t),outlined:"",type:"search",label:"Buscar promociones",color:"primary"},{append:a(()=>[e(I,{name:"search"})]),_:1},8,["modelValue"])]),s("div",T,[g.value?(c(),u(h,{key:0},C(20,t=>s("div",{key:t,class:"skeleton-card"},[e(x,{flat:""},{default:a(()=>[e(n,{height:"150px",square:""}),e(d,null,{default:a(()=>[e(n,{type:"text",class:"text-subtitle1"}),e(n,{type:"text",class:"text-subtitle1"}),e(n,{type:"text",class:"text-caption"}),e(n,{type:"text",class:"text-caption"}),e(n,{type:"text",class:"text-caption"})]),_:1}),e(w,{align:"right",class:"q-pt-none"},{default:a(()=>[e(n,{type:"QBtn"})]),_:1})]),_:1})])),64)):(c(),u(h,{key:1},[((Q=f.value)==null?void 0:Q.length)===0?(c(),u("div",W,"No se encontraron resultados")):(c(!0),u(h,{key:1},C(f.value,t=>(c(),A(x,{key:t.id,class:"news-card"},{default:a(()=>[e(P,{src:t.img_url,"spinner-color":"dark",class:"news-image"},null,8,["src"]),e(d,null,{default:a(()=>[s("div",Y,v(t.titulo),1)]),_:2},1024),e(d,{class:"q-pt-none"},{default:a(()=>[s("p",Z,v(t.descripcion),1)]),_:2},1024),e(w,{align:"right",class:"q-pt-none"},{default:a(()=>[e(b,{color:"primary",onClick:O=>q({...t}),flat:""},{default:a(()=>[D("Ver m\xE1s")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))],64))]),s("div",j,[e($,{modelValue:m.value,"onUpdate:modelValue":r[1]||(r[1]=t=>m.value=t),max:B.value},null,8,["modelValue","max"])]),e(U,{modelValue:i.value,"onUpdate:modelValue":r[2]||(r[2]=t=>i.value=t)},{default:a(()=>[e(x,{class:"news-card modal-card"},{default:a(()=>[e(P,{src:_.value.img_url,"spinner-color":"dark",class:"news-image"},null,8,["src"]),e(d,null,{default:a(()=>[s("div",z,v(_.value.titulo),1)]),_:1}),e(d,{class:"q-pt-none"},{default:a(()=>[s("div",K,v(_.value.descripcion),1)]),_:1}),e(F),e(w,{align:"right"},{default:a(()=>[M(e(b,{flat:"",color:"primary",label:"Cerrar"},null,512),[[J]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{re as default};
