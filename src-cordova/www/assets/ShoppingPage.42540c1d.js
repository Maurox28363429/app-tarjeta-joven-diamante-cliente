import{Q as L}from"./QInnerLoading.91a81652.js";import{Q as N}from"./QTable.2bb885b5.js";import{Q as A}from"./QPagination.33bbd4ba.js";import{ae as z,bE as M,bF as E,bG as G,V as U,c1 as j,ab as J,cE as R,l as c,a_ as W,au as X,aI as Y,aA as p,Y as x,Z as n,a4 as e,y as Z,b3 as a,cI as V,bs as Q,W as k,a3 as s,X as B,b5 as H,cF as K,J as $,aG as O,F as b,c5 as C,cA as ee,aD as ae,aB as te}from"./index.f2854204.js";import{Q as q}from"./QTooltip.bfca88d8.js";import{a as h,Q as f}from"./QItemSection.7aeaf6f8.js";import{Q as _}from"./QItemLabel.590af1b2.js";import{Q as le}from"./QList.44c51499.js";import{C as oe}from"./ClosePopup.8a271a9b.js";import{i as se}from"./index.360ce4ab.js";import{u as ne}from"./userAuth.958f8d0b.js";import"./QSelect.788ff9c2.js";import"./position-engine.9a306e1e.js";import"./selection.e1440f78.js";import"./rtl.b51694b1.js";import"./format.a33550d6.js";import"./axios.f1f32898.js";import"./useToast.2a507564.js";const ie=z("div",{class:"q-space"});var re=M({name:"QSpace",setup(){return()=>ie}}),ue=M({name:"QBar",props:{...E,dense:Boolean},setup(i,{slots:r}){const{proxy:{$q:u}}=J(),v=G(i,u),g=U(()=>`q-bar row no-wrap items-center q-bar--${i.dense===!0?"dense":"standard"}  q-bar--${v.value===!0?"dark":"light"}`);return()=>z("div",{class:g.value,role:"toolbar"},j(r.default))}});const T=i=>(ae("data-v-74325393"),i=i(),te(),i),de={class:"q-pa-lg flex flex-center"},ce={class:"q-pa-md full-width",style:{position:"relative","min-height":"400px"}},me={class:"q-pa-md q-gutter-sm"},pe=T(()=>n("div",{class:"text-h6 text-center"},"Productos asociados",-1)),fe=T(()=>n("hr",{style:{opacity:"0.5"}},null,-1)),_e=["src"],ve={__name:"ShoppingPage",setup(i){const{user:r}=ne(),u=c(1),v=c(1),g=c([]),y=c(!1),d=c(!0),w=c(!1),I=[{name:"id",label:"ID",field:"id",align:"left"},{name:"comercio",label:"Comercio",field:l=>l.comercio.name,align:"left"},{name:"total",label:"Total",field:l=>l.total,align:"left"},{name:"total_descuento",label:"Descuento total",field:l=>l.total_descuento,align:"left"}];r.value.role_id===3&&(I[1]={name:"client",label:"Cliente",field:l=>l.client.name,align:"left"});const S=c([]);W(u,async l=>{await D(u.value)}),X(async()=>{await D()});const F=(l,t,m)=>{y.value=!0,g.value=t.ofertas},D=async(l=1)=>{try{w.value=!0;const t=r.value.role_id===3?`/cliente-comercio-ofertas?with[]=comercio&with[]=client&page=${l}&client_id=${r.value.id}`:`/cliente-comercio-ofertas?with[]=comercio&with[]=client&page=${l}&comercio_id=${r.value.id}`,{data:m}=await se.get(t);S.value=m.data,v.value=m.pagination.lastPage,u.value=m.pagination.currentPage}catch(t){console.log(t)}finally{w.value=!1}};return(l,t)=>{const m=Y("q-section");return p(),x($,null,[n("div",de,[n("div",ce,[e(L,{showing:w.value,label:"Por favor espera...","label-class":"text-teal","label-style":"font-size: 1.1em"},null,8,["showing"]),e(N,{class:"my-sticky-header-table",flat:"",bordered:"",title:Z(r).role_id===2?"Mis ventas":"Mis compras",rows:S.value,columns:I,"hide-bottom":"",dense:"","rows-per-page-options":[10,20,50],"rows-per-page":15,onRowClick:F,"row-key":"id"},null,8,["title","rows"]),e(A,{style:{"margin-top":"1em"},modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=o=>u.value=o),max:v.value,"boundary-numbers":""},null,8,["modelValue","max"])])]),n("div",me,[e(ee,{modelValue:y.value,"onUpdate:modelValue":t[3]||(t[3]=o=>y.value=o),persistent:"",maximized:d.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:a(()=>[e(V,{class:"bg-white text-black"},{default:a(()=>[e(ue,null,{default:a(()=>[e(re),e(Q,{dense:"",flat:"",icon:"minimize",onClick:t[1]||(t[1]=o=>d.value=!1),disable:!d.value},{default:a(()=>[d.value?(p(),k(q,{key:0,class:"bg-white text-primary"},{default:a(()=>[s("Minimize")]),_:1})):B("",!0)]),_:1},8,["disable"]),e(Q,{dense:"",flat:"",icon:"crop_square",onClick:t[2]||(t[2]=o=>d.value=!0),disable:d.value},{default:a(()=>[d.value?B("",!0):(p(),k(q,{key:0,class:"bg-white text-primary"},{default:a(()=>[s("Maximize")]),_:1}))]),_:1},8,["disable"]),H((p(),k(Q,{dense:"",flat:"",icon:"close"},{default:a(()=>[e(q,{class:"bg-white text-primary"},{default:a(()=>[s("Close")]),_:1})]),_:1})),[[oe]])]),_:1}),e(K,null,{default:a(()=>[pe,fe,n("section",null,[(p(!0),x($,null,O(g.value,o=>(p(),x("div",{key:o.id,style:{display:"inline-flex"}},[e(V,{class:"my-card",flat:"",bordered:""},{default:a(()=>{var P;return[n("img",{src:(P=o.img_url)!=null?P:"https://cdn.quasar.dev/img/parallax2.jpg"},null,8,_e),e(le,null,{default:a(()=>[e(h,null,{default:a(()=>[e(m,null,{default:a(()=>[n("h5",null,b(o.nombre),1)]),_:2},1024)]),_:2},1024),e(h,null,{default:a(()=>[e(f,{avatar:""},{default:a(()=>[e(C,{color:"primary",name:"production_quantity_limits"})]),_:1}),e(f,null,{default:a(()=>[e(_,null,{default:a(()=>[s("Cantidad")]),_:1}),e(_,{caption:""},{default:a(()=>[s(b(o.cantidad),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(h,null,{default:a(()=>[e(f,{avatar:""},{default:a(()=>[e(C,{color:"red",name:"paid"})]),_:1}),e(f,null,{default:a(()=>[e(_,null,{default:a(()=>[s("precio por unidad")]),_:1}),e(_,{caption:""},{default:a(()=>[s(b(o.price),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(h,null,{default:a(()=>[e(f,{avatar:""},{default:a(()=>[e(C,{color:"amber",name:"sell"})]),_:1}),e(f,null,{default:a(()=>[e(_,null,{default:a(()=>[s("Descuento")]),_:1}),e(_,{caption:""},{default:a(()=>[s(b(o.descuento)+" %",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]}),_:2},1024)]))),128))])]),_:1})]),_:1})]),_:1},8,["modelValue","maximized"])])],64)}}};var Me=R(ve,[["__scopeId","data-v-74325393"]]);export{Me as default};
