import{Q as F}from"./QTable.37fed2cf.js";import{Q as N}from"./QPagination.b5e3548d.js";import{ae as $,bE as z,bF as A,bG as E,V as L,c1 as G,ab as U,cE as j,l as m,a_ as J,au as R,aI as W,aA as p,Y as w,Z as r,a4 as e,y as X,b3 as a,cI as V,bs as x,W as Q,a3 as n,X as B,b5 as Y,cF as Z,J as P,aG as H,F as b,c5 as k,cA as K,aD as O,aB as ee}from"./index.04da5061.js";import{Q as C}from"./QTooltip.686c3af7.js";import{a as h,Q as f}from"./QItemSection.57530a0e.js";import{Q as _}from"./QItemLabel.2d926680.js";import{Q as ae}from"./QList.e7fa38c4.js";import{C as te}from"./ClosePopup.b88ac62c.js";import{i as le}from"./index.360ce4ab.js";import{u as oe}from"./userAuth.904d0068.js";import"./QSelect.196c6766.js";import"./position-engine.e88a9c71.js";import"./selection.8a72d576.js";import"./rtl.b51694b1.js";import"./format.a33550d6.js";import"./axios.f1f32898.js";import"./useToast.b6eea3d0.js";const se=$("div",{class:"q-space"});var ne=z({name:"QSpace",setup(){return()=>se}}),ie=z({name:"QBar",props:{...A,dense:Boolean},setup(d,{slots:i}){const{proxy:{$q:c}}=U(),g=E(d,c),v=L(()=>`q-bar row no-wrap items-center q-bar--${d.dense===!0?"dense":"standard"}  q-bar--${g.value===!0?"dark":"light"}`);return()=>$("div",{class:v.value,role:"toolbar"},G(i.default))}});const M=d=>(O("data-v-e22df86c"),d=d(),ee(),d),re={class:"q-pa-lg flex flex-center"},de={class:"q-pa-md full-width"},ce={class:"q-pa-md q-gutter-sm"},ue=M(()=>r("div",{class:"text-h6 text-center"},"Productos asociados",-1)),me=M(()=>r("hr",{style:{opacity:"0.5"}},null,-1)),pe=["src"],fe={__name:"ShoppingPage",setup(d){const{user:i}=oe();console.log(i);const c=m(1),g=m(0),v=m([]),y=m(!1),u=m(!0),q=[{name:"id",label:"ID",field:"id",align:"left"},{name:"comercio",label:"Comercio",field:t=>t.comercio.name,align:"left"},{name:"total",label:"Total",field:t=>t.total,align:"left"},{name:"total_descuento",label:"Descuento total",field:t=>t.total_descuento,align:"left"}];i.role_id===2&&(q[1]={name:"client",label:"Cliente",field:t=>t.client.name,align:"left"});const S=m([]);J(c,async t=>{await I(c.value)}),R(async()=>{await I()});const T=(t,l,s)=>{console.log(l),console.log(s),console.log(t),y.value=!0,v.value=l.ofertas},I=async(t=0)=>{const l=i.role_id===2?`/cliente-comercio-ofertas?with[]=comercio&with[]=client&page=${t}&client_id=${i.id}`:`/cliente-comercio-ofertas?with[]=comercio&with[]=client&page=${t}&comercio_id=${i.id}`;await le.get(l).then(s=>{S.value=s.data.data,g.value=s.data.pagination.lastPage,c.value=s.data.pagination.currentPage}).catch(s=>{console.log(s)})};return(t,l)=>{const s=W("q-section");return p(),w(P,null,[r("div",re,[r("div",de,[e(F,{class:"my-sticky-header-table",flat:"",bordered:"",title:X(i).role_id===2?"Mis ventas":"Mis compras",rows:S.value,columns:q,"hide-bottom":"",dense:"","rows-per-page-options":[10,20,50],"rows-per-page":15,onRowClick:T,"row-key":"id"},null,8,["title","rows"]),e(N,{style:{"margin-top":"1em"},modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=o=>c.value=o),max:g.value,"boundary-numbers":""},null,8,["modelValue","max"])])]),r("div",ce,[e(K,{modelValue:y.value,"onUpdate:modelValue":l[3]||(l[3]=o=>y.value=o),persistent:"",maximized:u.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:a(()=>[e(V,{class:"bg-white text-black"},{default:a(()=>[e(ie,null,{default:a(()=>[e(ne),e(x,{dense:"",flat:"",icon:"minimize",onClick:l[1]||(l[1]=o=>u.value=!1),disable:!u.value},{default:a(()=>[u.value?(p(),Q(C,{key:0,class:"bg-white text-primary"},{default:a(()=>[n("Minimize")]),_:1})):B("",!0)]),_:1},8,["disable"]),e(x,{dense:"",flat:"",icon:"crop_square",onClick:l[2]||(l[2]=o=>u.value=!0),disable:u.value},{default:a(()=>[u.value?B("",!0):(p(),Q(C,{key:0,class:"bg-white text-primary"},{default:a(()=>[n("Maximize")]),_:1}))]),_:1},8,["disable"]),Y((p(),Q(x,{dense:"",flat:"",icon:"close"},{default:a(()=>[e(C,{class:"bg-white text-primary"},{default:a(()=>[n("Close")]),_:1})]),_:1})),[[te]])]),_:1}),e(Z,null,{default:a(()=>[ue,me,r("section",null,[(p(!0),w(P,null,H(v.value,o=>(p(),w("div",{key:o.id,style:{display:"inline-flex"}},[e(V,{class:"my-card",flat:"",bordered:""},{default:a(()=>{var D;return[r("img",{src:(D=o.img_url)!=null?D:"https://cdn.quasar.dev/img/parallax2.jpg"},null,8,pe),e(ae,null,{default:a(()=>[e(h,null,{default:a(()=>[e(s,null,{default:a(()=>[r("h5",null,b(o.nombre),1)]),_:2},1024)]),_:2},1024),e(h,null,{default:a(()=>[e(f,{avatar:""},{default:a(()=>[e(k,{color:"primary",name:"production_quantity_limits"})]),_:1}),e(f,null,{default:a(()=>[e(_,null,{default:a(()=>[n("Cantidad")]),_:1}),e(_,{caption:""},{default:a(()=>[n(b(o.cantidad),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(h,null,{default:a(()=>[e(f,{avatar:""},{default:a(()=>[e(k,{color:"red",name:"paid"})]),_:1}),e(f,null,{default:a(()=>[e(_,null,{default:a(()=>[n("precio por unidad")]),_:1}),e(_,{caption:""},{default:a(()=>[n(b(o.price),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(h,null,{default:a(()=>[e(f,{avatar:""},{default:a(()=>[e(k,{color:"amber",name:"sell"})]),_:1}),e(f,null,{default:a(()=>[e(_,null,{default:a(()=>[n("Descuento")]),_:1}),e(_,{caption:""},{default:a(()=>[n(b(o.descuento)+" %",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]}),_:2},1024)]))),128))])]),_:1})]),_:1})]),_:1},8,["modelValue","maximized"])])],64)}}};var Pe=j(fe,[["__scopeId","data-v-e22df86c"]]);export{Pe as default};
